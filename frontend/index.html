<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>产品报价系统</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>交付报价系统</h1>
        </header>
        
        <main>
            <!-- 项目基本信息 -->
            <section class="section">
                <h2>1. 项目基本信息</h2>
                <div class="form-group">
                    <label for="projectId">项目编号</label>
                    <input type="text" id="projectId" placeholder="自动生成或手动输入">
                </div>
                <div class="form-group">
                    <label for="projectName">项目名称</label>
                    <input type="text" id="projectName" placeholder="请输入项目名称">
                </div>
                <div class="form-group">
                    <label for="customerName">客户名称</label>
                    <input type="text" id="customerName" placeholder="请输入客户名称">
                </div>
            </section>

            <!-- 硬成本计算 -->
            <section class="section">
                <h2>2. 硬成本计算</h2>
                
                <!-- 现场人员成本 -->
                <div class="subsection">
                    <h3>2.1 现场人员成本</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="personLevel">人员单价</label>
                            <input type="number" id="personLevel" value="20000" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label for="personCount">人数</label>
                            <input type="number" id="personCount" value="3" min="0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="personMonths">月数</label>
                            <input type="number" id="personMonths" value="5" min="0" step="0.5">
                        </div>
                        <div class="form-group result">
                            <label>现场人员成本</label>
                            <input type="number" id="personCost" readonly>
                        </div>
                    </div>
                </div>

                <!-- 房租成本 -->
                <div class="subsection">
                    <h3>2.2 房租成本</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rentPrice">房租单价</label>
                            <input type="number" id="rentPrice" value="3000" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label for="rentUnits">房租套数</label>
                            <input type="number" id="rentUnits" value="1" min="0" step="1">
                        </div>
                        <div class="form-group">
                            <label for="rentMonths">房租月数</label>
                            <input type="number" id="rentMonths" value="5" min="0" step="1">
                        </div>
                        <div class="form-group result">
                            <label>房租成本</label>
                            <input type="number" id="rentCost" readonly>
                        </div>
                    </div>
                </div>

                <!-- 补助成本 -->
                <div class="subsection">
                    <h3>2.3 补助成本</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="allowancePrice">补助单价</label>
                            <input type="number" id="allowancePrice" value="60" min="0" step="10">
                        </div>
                        <div class="form-group">
                            <label for="allowanceDays">补助天数</label>
                            <input type="number" id="allowanceDays" value="150" min="0" step="1">
                        </div>
                        <div class="form-group result">
                            <label>补助成本</label>
                            <input type="number" id="allowanceCost" readonly>
                        </div>
                    </div>
                </div>

                <!-- 差旅成本 -->
                <div class="subsection">
                    <h3>2.4 差旅成本</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="travelPrice">差旅单价</label>
                            <input type="number" id="travelPrice" value="1200" min="0" step="100">
                        </div>
                        <div class="form-group">
                            <label for="travelMonths">差旅月数</label>
                            <input type="number" id="travelMonths" value="5" min="0" step="1">
                        </div>
                        <div class="form-group result">
                            <label>差旅成本</label>
                            <input type="number" id="travelCost" readonly>
                        </div>
                    </div>
                </div>

                <!-- 硬成本小计 -->
                <div class="form-row total">
                    <div class="form-group result">
                        <label>硬成本小计</label>
                        <input type="number" id="hardCostTotal" readonly>
                    </div>
                </div>
            </section>

            <!-- 软成本计算 -->
            <section class="section">
                <h2>3. 软成本计算</h2>
                
                <!-- 纯定制人月计算 -->
                <div id="pureCustomSection" class="subsection" style="display: block;">
                    <h3>纯定制人月计算</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pureCustomMonths">纯定制人月数</label>
                            <input type="number" id="pureCustomMonths" value="4" min="0" step="1">
                        </div>
                        <div class="form-group">
                            <label for="pureCustomPrice">纯定制人月单价</label>
                            <input type="number" id="pureCustomPrice" value="20000" min="0" step="1000">
                        </div>
                    </div>
                </div>
                
                <!-- 半定制人月计算 -->
                <div id="semiCustomSection" class="subsection" style="display: block;">
                    <h3>半定制人月计算</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="semiCustomMonths">半定制人月数</label>
                            <input type="number" id="semiCustomMonths" value="4" min="0" step="1">
                        </div>
                        <div class="form-group">
                            <label for="semiCustomPrice">半定制人月单价</label>
                            <input type="number" id="semiCustomPrice" value="15000" min="0" step="1000">
                        </div>
                        <div class="form-group">
                            <label for="reuseRatio">产品复用比例</label>
                            <div class="range-container">
                                <input type="range" id="reuseRatio" min="0" max="100" value="25" step="1">
                                <span id="reuseRatioValue">25%</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group result">
                        <label>软成本小计</label>
                        <input type="number" id="softCostTotal" readonly>
                    </div>
                </div>
            </section>

            <!-- 合同金额和利润结构 -->
            <section class="section">
                <h2>4. 合同金额和利润结构</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="constraintRatio">约束比例 (硬+软成本/合同金额)</label>
                        <input type="number" id="constraintRatio" value="54" min="0" max="100" step="1">
                        <span>%</span>
                    </div>
                    <div class="form-group result">
                        <label>硬软成本合计</label>
                        <input type="number" id="hardSoftTotal" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group result">
                        <label>合同金额 (含税)</label>
                        <input type="number" id="contractAmount" readonly>
                    </div>
                </div>
                
                <!-- 新增比例设置 -->
                <div class="subsection">
                    <h3>4.1 比例设置</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="salesRatio">销售比例</label>
                            <input type="number" id="salesRatio" value="8" min="0" max="100" step="0.1">
                            <span>%</span>
                        </div>
                        <div class="form-group">
                            <label for="platformFeeRatio">平台费比例</label>
                            <input type="number" id="platformFeeRatio" value="5" min="0" max="100" step="0.1">
                            <span>%</span>
                        </div>
                        <div class="form-group">
                            <label for="taxRate">税率</label>
                            <input type="number" id="taxRate" value="3" min="0" max="100" step="0.1">
                            <span>%</span>
                        </div>
                    </div>
                </div>
                
                <!-- 毛利显示 -->
                <div class="form-row total">
                    <div class="form-group result">
                        <label>毛利</label>
                        <input type="number" id="grossProfit" readonly>
                    </div>
                </div>
            </section>

            <!-- 操作按钮 -->
            <section class="section actions">
                <button id="calculateBtn" class="btn-primary">计算报价</button>
                <button id="exportBtn" class="btn-secondary">导出Excel</button>
                <button id="saveBtn" class="btn-secondary">保存报价</button>
                <button id="clearBtn" class="btn-secondary">清空表单</button>
            </section>

            <!-- 利润结构可视化 -->
            <section class="section">
                <h2>5. 利润结构可视化</h2>
                <div id="profitChart" class="chart"></div>
            </section>
        </main>
    </div>

    <script src="js/app.js"></script>
</body>
</html>